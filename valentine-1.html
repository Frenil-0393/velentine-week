<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Valentine Experience</title>
  <style>
    :root {
      --rose-dark: #4b0f2a;
      --rose-mid: #b8326a;
      --rose-soft: #f7b7cc;
      --pearl: #fff6f9;
      --text: #2f0b1a;
      --glass: rgba(255, 255, 255, 0.14);
      --shadow: 0 24px 70px rgba(75, 15, 42, 0.35);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "SF Pro Text", "Apple Color Emoji", "Helvetica Neue", Helvetica, Arial, sans-serif;
    }

    body {
      min-height: 100vh;
      background: radial-gradient(circle at top, #ffe5ef, #f7b7cc 45%, #b8326a 100%);
      background-size: 200% 200%;
      animation: backgroundPulse 14s ease-in-out infinite;
      color: var(--text);
      overflow: hidden;
      position: relative;
    }

    @keyframes backgroundPulse {
      0% { background-position: 0% 20%; }
      50% { background-position: 100% 80%; }
      100% { background-position: 0% 20%; }
    }

    .app {
      min-height: 100vh;
      display: grid;
      place-items: center;
      position: relative;
      padding: 40px 18px;
      isolation: isolate;
    }

    .romantic-glow {
      position: absolute;
      inset: -30% -10% -30% -10%;
      background: radial-gradient(circle at 20% 30%, rgba(255, 140, 180, 0.35), transparent 60%),
        radial-gradient(circle at 80% 70%, rgba(255, 190, 210, 0.35), transparent 55%);
      filter: blur(10px);
      opacity: 0.7;
      animation: glowDrift 18s ease-in-out infinite;
      z-index: 0;
      pointer-events: none;
    }

    @keyframes glowDrift {
      0% { transform: translateY(-10px) scale(1); }
      50% { transform: translateY(14px) scale(1.03); }
      100% { transform: translateY(-10px) scale(1); }
    }

    .petal-field {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }

    .petal-field span {
      position: absolute;
      width: 14px;
      height: 14px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 0 50% 50% 50%;
      transform: rotate(45deg);
      animation: petalFall 10s linear infinite;
      opacity: 0.6;
    }

    .petal-field span:nth-child(1) { left: 8%; animation-delay: 0s; }
    .petal-field span:nth-child(2) { left: 18%; animation-delay: 1.2s; }
    .petal-field span:nth-child(3) { left: 28%; animation-delay: 2.4s; }
    .petal-field span:nth-child(4) { left: 38%; animation-delay: 0.8s; }
    .petal-field span:nth-child(5) { left: 48%; animation-delay: 3s; }
    .petal-field span:nth-child(6) { left: 58%; animation-delay: 1.6s; }
    .petal-field span:nth-child(7) { left: 68%; animation-delay: 2.8s; }
    .petal-field span:nth-child(8) { left: 78%; animation-delay: 1s; }
    .petal-field span:nth-child(9) { left: 88%; animation-delay: 2s; }
    .petal-field span:nth-child(10) { left: 14%; animation-delay: 3.4s; }
    .petal-field span:nth-child(11) { left: 54%; animation-delay: 4s; }
    .petal-field span:nth-child(12) { left: 92%; animation-delay: 4.6s; }

    @keyframes petalFall {
      0% { transform: translateY(-10%) rotate(20deg); opacity: 0; }
      10% { opacity: 0.6; }
      100% { transform: translateY(120vh) rotate(220deg); opacity: 0; }
    }

    .page {
      width: min(980px, 100%);
      background: var(--glass);
      border: 1px solid rgba(255, 255, 255, 0.4);
      border-radius: 30px;
      padding: clamp(26px, 5vw, 48px);
      box-shadow: var(--shadow);
      backdrop-filter: blur(20px);
      display: none;
      animation: fadeUp 0.8s ease;
      position: relative;
      z-index: 3;
    }

    .page.active {
      display: block;
    }

    @keyframes fadeUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .title {
      font-size: clamp(32px, 6vw, 56px);
      color: var(--rose-dark);
      text-align: center;
      margin-bottom: 18px;
      font-weight: 700;
      letter-spacing: -1px;
      animation: titleGlow 2s ease-in-out infinite;
    }

    @keyframes titleGlow {
      0%, 100% { text-shadow: 0 0 20px rgba(255, 63, 134, 0.3); }
      50% { text-shadow: 0 0 40px rgba(255, 63, 134, 0.6); }
    }

    .subtitle {
      text-align: center;
      font-size: clamp(16px, 2.8vw, 20px);
      color: rgba(47, 11, 26, 0.7);
      margin-bottom: 34px;
    }

    .typing-box {
      background: rgba(255, 255, 255, 0.65);
      border-radius: 22px;
      padding: 28px;
      font-size: clamp(16px, 2.6vw, 20px);
      line-height: 1.8;
      min-height: 180px;
      box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.6);
      animation: boxFadeIn 0.8s ease-out;
    }

    @keyframes boxFadeIn {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .typing-cursor {
      display: inline-block;
      width: 3px;
      height: 1.2em;
      background: var(--rose-dark);
      margin-left: 6px;
      animation: blink 0.7s infinite;
      vertical-align: middle;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    .primary-btn {
      display: block;
      margin: 28px auto 0;
      padding: 14px 32px;
      border-radius: 999px;
      border: none;
      background: linear-gradient(135deg, #ff3f86, #ff8fb4);
      color: white;
      font-size: 18px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 14px 30px rgba(255, 63, 134, 0.35);
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.3s ease;
      opacity: 0;
      pointer-events: none;
      position: relative;
      overflow: hidden;
    }

    .primary-btn::after {
      content: "";
      position: absolute;
      top: -50%;
      left: -60%;
      width: 40%;
      height: 200%;
      background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.45), transparent);
      transform: translateX(-120%);
      transition: transform 0.6s ease;
      pointer-events: none;
    }

    .primary-btn:hover::after {
      transform: translateX(320%);
    }

    .primary-btn.show {
      animation: btnPulse 0.5s ease-out;
      opacity: 1;
      pointer-events: auto;
    }

    @keyframes btnPulse {
      0% {
        opacity: 0;
        transform: scale(0.8);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .primary-btn:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: 0 18px 40px rgba(255, 63, 134, 0.45);
    }

    .question {
      font-size: clamp(20px, 3.6vw, 28px);
      font-weight: 600;
      text-align: center;
      color: var(--rose-dark);
      margin-bottom: 20px;
    }

    .answer-box {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-direction: column;
      align-items: center;
      flex-wrap: wrap;
      width: 100%;
    }

    .answer-box input {
      padding: 14px 20px;
      border-radius: 16px;
      border: 2px solid rgba(255, 63, 134, 0.3);
      width: min(420px, 90vw);
      font-size: 18px;
      background: rgba(255, 255, 255, 0.85);
      outline: none;
      text-align: center;
      transition: border-color 0.3s ease;
    }

    .answer-box input:focus {
      border-color: rgba(255, 63, 134, 0.8);
      background: rgba(255, 255, 255, 0.95);
    }

    .answer-feedback {
      text-align: center;
      margin-top: 16px;
      font-size: 18px;
      color: #7a1133;
      min-height: 28px;
    }

    .gallery {
      margin-top: 26px;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      display: none;
      z-index: 1;
    }

    .gallery.show {
      display: block;
      pointer-events: auto;
    }

    #passwordContinue {
      position: relative;
      z-index: 2000 !important;
    }

    .photo {
      position: fixed;
      width: 180px;
      height: 180px;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.18);
      cursor: grab;
      user-select: none;
      border: 3px solid rgba(255, 255, 255, 0.7);
      background: white;
      animation: photoSlideIn 0.6s ease-out both;
    }

    .photo img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: white;
    }

    .photo.one { top: 8%; left: 5%; animation-delay: 0.1s; }
    .photo.two { top: 18%; right: 5%; animation-delay: 0.2s; }
    .photo.three { top: 50%; left: 8%; animation-delay: 0.3s; }
    .photo.four { top: 50%; right: 8%; animation-delay: 0.4s; }
    .photo.five { bottom: 12%; left: 25%; animation-delay: 0.5s; }
    .photo.six { bottom: 12%; right: 25%; animation-delay: 0.6s; }

    @keyframes photoSlideIn {
      from {
        opacity: 0;
        transform: scale(0.8) rotate(-5deg);
      }
      to {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }

    .proposal-wrap {
      text-align: center;
    }

    .proposal-text {
      font-size: clamp(26px, 4vw, 34px);
      font-weight: 700;
      color: var(--rose-dark);
      margin-bottom: 20px;
    }

    .proposal-actions {
      display: flex;
      gap: 16px;
      justify-content: center;
      align-items: center;
      margin-top: 20px;
    }

    .yes-btn,
    .no-btn {
      padding: 14px 28px;
      border-radius: 999px;
      border: none;
      font-size: 18px;
      cursor: pointer;
      font-weight: 600;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      animation: buttonAppear 0.5s ease-out;
    }

    @keyframes buttonAppear {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .yes-btn {
      background: linear-gradient(135deg, #ff3f86, #ff8fb4);
      color: white;
      box-shadow: 0 12px 26px rgba(255, 63, 134, 0.4);
    }

    .no-btn {
      background: rgba(255, 255, 255, 0.8);
      color: #7a1133;
      border: 1px solid rgba(255, 255, 255, 0.8);
      position: relative;
    }

    .plea {
      margin-top: 18px;
      font-size: 18px;
      color: #7a1133;
      min-height: 22px;
    }

    .final-line {
      margin-top: 22px;
      font-size: 22px;
      color: #5a112a;
      font-weight: 600;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .final-line.show {
      opacity: 1;
    }

    .floating-hearts {
      position: absolute;
      inset: 0;
      pointer-events: none;
      z-index: 2;
    }

    .floating-hearts span {
      position: absolute;
      font-size: clamp(24px, 4vw, 42px);
      font-weight: 700;
      outline: none;
      perspective: 1000px;
    }

    .floating-hearts .letter-h {
      opacity: 0.3;
      animation: floatH 20s linear infinite;
    }
    .floating-hearts .letter-e {
      opacity: 0.25;
      animation: floatE 22s linear infinite;
    }
    .floating-hearts .letter-a {
      opacity: 0.35;
      animation: floatA 18s linear infinite;
    }
    .floating-hearts .letter-r {
      opacity: 0.28;
      animation: floatR 21s linear infinite;
    }
    .floating-hearts .letter-t {
      opacity: 0.32;
      animation: floatT 19s linear infinite;
    }

    .floating-hearts span:nth-child(1) { left: 5%; animation-delay: 0s; top: 10%; }
    .floating-hearts span:nth-child(2) { left: 12%; animation-delay: 0.5s; top: 15%; }
    .floating-hearts span:nth-child(3) { left: 19%; animation-delay: 1s; top: 25%; }
    .floating-hearts span:nth-child(4) { left: 26%; animation-delay: 1.5s; top: 35%; }
    .floating-hearts span:nth-child(5) { left: 33%; animation-delay: 2s; top: 45%; }
    .floating-hearts span:nth-child(6) { left: 40%; animation-delay: 2.5s; top: 55%; }
    .floating-hearts span:nth-child(7) { left: 47%; animation-delay: 3s; top: 65%; }
    .floating-hearts span:nth-child(8) { left: 54%; animation-delay: 3.5s; top: 70%; }
    .floating-hearts span:nth-child(9) { left: 61%; animation-delay: 4s; top: 75%; }
    .floating-hearts span:nth-child(10) { left: 68%; animation-delay: 4.5s; top: 80%; }
    .floating-hearts span:nth-child(11) { left: 75%; animation-delay: 5s; top: 85%; }
    .floating-hearts span:nth-child(12) { left: 82%; animation-delay: 5.5s; top: 88%; }
    .floating-hearts span:nth-child(13) { left: 89%; animation-delay: 6s; top: 90%; }
    .floating-hearts span:nth-child(14) { left: 96%; animation-delay: 6.5s; top: 92%; }
    .floating-hearts span:nth-child(15) { left: 12%; animation-delay: 7s; top: 5%; }
    .floating-hearts span:nth-child(16) { left: 35%; animation-delay: 8s; top: 20%; }
    .floating-hearts span:nth-child(17) { left: 58%; animation-delay: 9s; top: 40%; }
    .floating-hearts span:nth-child(18) { left: 78%; animation-delay: 10s; top: 60%; }
    .floating-hearts span:nth-child(19) { left: 25%; animation-delay: 11s; top: 95%; }
    .floating-hearts span:nth-child(20) { left: 70%; animation-delay: 12s; top: 30%; }

    @keyframes floatH {
      0% { transform: translateX(-600px) scale(0.8) rotateY(0deg); opacity: 0; }
      10% { opacity: 0.3; }
      90% { opacity: 0.3; }
      100% { transform: translateX(600px) scale(1.1) rotateY(360deg); opacity: 0; }
    }

    @keyframes floatE {
      0% { transform: translateX(-600px) scale(0.7) rotateX(0deg); opacity: 0; }
      15% { opacity: 0.25; }
      85% { opacity: 0.25; }
      100% { transform: translateX(600px) scale(1) rotateX(360deg); opacity: 0; }
    }

    @keyframes floatA {
      0% { transform: translateX(-600px) scale(1) rotate(0deg); opacity: 0; }
      12% { opacity: 0.35; }
      88% { opacity: 0.35; }
      100% { transform: translateX(600px) scale(0.9) rotate(360deg); opacity: 0; }
    }

    @keyframes floatR {
      0% { transform: translateX(-600px) translateY(-100px) scale(0.9); opacity: 0; }
      14% { opacity: 0.28; }
      86% { opacity: 0.28; }
      100% { transform: translateX(600px) translateY(100px) scale(1.1); opacity: 0; }
    }

    @keyframes floatT {
      0% { transform: translateX(-600px) skewX(20deg) scale(1); opacity: 0; }
      13% { opacity: 0.32; }
      87% { opacity: 0.32; }
      100% { transform: translateX(600px) skewX(-20deg) scale(0.95); opacity: 0; }
    }


    .music-hint {
      position: absolute;
      right: 20px;
      bottom: 20px;
      font-size: 14px;
      color: rgba(47, 11, 26, 0.7);
      background: rgba(255, 255, 255, 0.7);
      padding: 8px 14px;
      border-radius: 999px;
    }

    @media (max-width: 768px) {
      .photo.one { width: 130px; height: 130px; top: 8%; left: 5%; }
      .photo.two { width: 130px; height: 130px; top: 20%; right: 5%; }
      .photo.three { width: 130px; height: 130px; top: 50%; left: 5%; }
      .photo.four { width: 130px; height: 130px; top: 50%; right: 5%; }
      .photo.five { width: 130px; height: 130px; bottom: 15%; left: 20%; }
      .photo.six { width: 130px; height: 130px; bottom: 15%; right: 20%; }
      
      .answer-box input {
        width: 100% !important;
        max-width: 85vw;
      }
    }
  </style>
</head>
<body>
  <audio id="bgMusic" src="valantine-audio.mp3" loop></audio>

  <div class="app">
    <div class="romantic-glow" aria-hidden="true"></div>
    <div class="petal-field" aria-hidden="true">
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
      <span></span>
    </div>
    <div class="floating-hearts" aria-hidden="true">
      <span class="letter-h">H</span>
      <span class="letter-e">E</span>
      <span class="letter-a">A</span>
      <span class="letter-r">R</span>
      <span class="letter-t">T</span>
      <span class="letter-h">H</span>
      <span class="letter-e">E</span>
      <span class="letter-a">A</span>
      <span class="letter-r">R</span>
      <span class="letter-t">T</span>
      <span class="letter-h">H</span>
      <span class="letter-e">E</span>
      <span class="letter-a">A</span>
      <span class="letter-r">R</span>
      <span class="letter-t">T</span>
      <span class="letter-h">H</span>
      <span class="letter-e">E</span>
      <span class="letter-a">A</span>
      <span class="letter-r">R</span>
      <span class="letter-t">T</span>
    </div>

    <section class="page active" id="pageIntro">
      <h1 class="title">A Little Love Note</h1>
      <p class="subtitle">For Kresha, from Parth</p>
      <div class="typing-box" id="typingBox"></div>
      <button class="primary-btn" id="continueBtn">Continue</button>
    </section>

    <section class="page" id="pagePassword">
      <h2 class="question">Which is my Dream Car Brand? üöó</h2>
      <p style="text-align: center; font-size: 16px; color: rgba(47, 11, 26, 0.6); margin-bottom: 20px;">You know all my secrets... or do you? üòè Let's see if you know me as well as I know you.</p>
      <div class="answer-box">
        <input id="answerInput" type="text" placeholder="Type your answer here..." autocomplete="off">
        <button class="primary-btn show" id="answerBtn">Check Answer</button>
      </div>
      <div class="answer-feedback" id="answerFeedback"></div>
      <div class="gallery" id="photoGallery">
        <div class="photo one" data-photo>
          <img src="image (1).jpeg" alt="Memory 1">
        </div>
        <div class="photo two" data-photo>
          <img src="image (2).jpeg" alt="Memory 2">
        </div>
        <div class="photo three" data-photo>
          <img src="image (3).jpeg" alt="Memory 3">
        </div>
        <div class="photo four" data-photo>
          <img src="image (4).jpeg" alt="Memory 4">
        </div>
        <div class="photo five" data-photo>
          <img src="image (5).jpeg" alt="Memory 5">
        </div>
        <div class="photo six" data-photo>
          <img src="image (6).jpeg" alt="Memory 6">
        </div>
      </div>
      <button class="primary-btn" id="passwordContinue">Continue</button>
    </section>

    <section class="page" id="pageProposal">
      <div class="proposal-wrap">
        <div class="proposal-text">Will you be my Valentine? üíï</div>
        <p style="text-align: center; font-size: 18px; color: rgba(47, 11, 26, 0.7); margin: 16px 0 24px 0; line-height: 1.6;">Not just for Valentine's Day, but for every day of my life. Be the reason I smile, the one I choose, my forever. Will you? üåπ</p>
        <div class="proposal-actions">
          <button class="yes-btn" id="yesBtn">Yes üéâ</button>
          <button class="no-btn" id="noBtn">No</button>
        </div>
        <div class="plea" id="pleaText"></div>
        <div class="final-line" id="finalLine">I know you... I Love You. Forever and always. üíñ</div>
      </div>
    </section>

    <div class="music-hint">Music is on</div>
  </div>

  <script>
    const typingBox = document.getElementById("typingBox");
    const continueBtn = document.getElementById("continueBtn");
    const pageIntro = document.getElementById("pageIntro");
    const pagePassword = document.getElementById("pagePassword");
    const pageProposal = document.getElementById("pageProposal");
    const answerInput = document.getElementById("answerInput");
    const answerBtn = document.getElementById("answerBtn");
    const answerFeedback = document.getElementById("answerFeedback");
    const photoGallery = document.getElementById("photoGallery");
    const passwordContinue = document.getElementById("passwordContinue");
    const yesBtn = document.getElementById("yesBtn");
    const noBtn = document.getElementById("noBtn");
    const pleaText = document.getElementById("pleaText");
    const finalLine = document.getElementById("finalLine");
    const bgMusic = document.getElementById("bgMusic");

    const storyText = "Kresha, my love... üíñ Every beat of this song reminds me of you. This little journey is my way of telling you all the things my heart feels every single day. You make me laugh harder than I ever thought possible (and yes, sometimes you make me cry üòÖ), but always in the most beautiful way. My days are softer because of your gentle nature, my nights are warmer because of your presence, and my heart is forever brighter because of your love. ‚ú® You're my favorite person to annoy, my best friend, my home. üòä In a world full of chaos, you are my peace. Thank you for being you, for loving me, for just... existing in my life. You make everything feel like a love story. üåπ Happy Valentine's Week, my forever love. üíï";
    let typingIndex = 0;
    let noClicks = 0;

    function typeStory() {
      if (typingIndex < storyText.length) {
        typingBox.textContent = storyText.substring(0, typingIndex + 1);
        typingIndex++;
        setTimeout(typeStory, 40);
      } else {
        typingBox.innerHTML = storyText + '<span class="typing-cursor"></span>';
        continueBtn.classList.add("show");
      }
    }

    function showPage(current, next) {
      current.classList.remove("active");
      next.classList.add("active");
    }

    continueBtn.addEventListener("click", () => {
      showPage(pageIntro, pagePassword);
    });

    answerBtn.addEventListener("click", () => {
      const raw = answerInput.value.toLowerCase().replace(/\s+/g, "");
      if (raw === "mercedes") {
        answerFeedback.textContent = "Perfect. You know me.";
        photoGallery.classList.add("show");
        passwordContinue.classList.add("show");
      } else {
        answerFeedback.textContent = "You do not know me.";
        photoGallery.classList.remove("show");
        passwordContinue.classList.remove("show");
      }
    });

    answerInput.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        answerBtn.click();
      }
    });

    // Enable dragging for photos (mouse and touch)
    document.querySelectorAll("[data-photo]").forEach((photo) => {
      function handleDragStart(event) {
        let dragTarget = photo;
        const rect = photo.getBoundingClientRect();
        const clientX = event.type.includes('touch') ? event.touches[0].clientX : event.clientX;
        const clientY = event.type.includes('touch') ? event.touches[0].clientY : event.clientY;
        const offsetX = clientX - rect.left;
        const offsetY = clientY - rect.top;
        photo.style.cursor = "grabbing";
        photo.style.zIndex = 1000;

        function onDragMove(moveEvent) {
          const moveX = moveEvent.type.includes('touch') ? moveEvent.touches[0].clientX : moveEvent.clientX;
          const moveY = moveEvent.type.includes('touch') ? moveEvent.touches[0].clientY : moveEvent.clientY;
          const newLeft = moveX - offsetX;
          const newTop = moveY - offsetY;
          const maxLeft = window.innerWidth - dragTarget.offsetWidth;
          const maxTop = window.innerHeight - dragTarget.offsetHeight;
          dragTarget.style.left = Math.max(0, Math.min(newLeft, maxLeft)) + 'px';
          dragTarget.style.top = Math.max(0, Math.min(newTop, maxTop)) + 'px';
        }

        function onDragEnd() {
          dragTarget.style.cursor = "grab";
          dragTarget.style.zIndex = 1;
          document.removeEventListener("mousemove", onDragMove);
          document.removeEventListener("touchmove", onDragMove);
          document.removeEventListener("mouseup", onDragEnd);
          document.removeEventListener("touchend", onDragEnd);
        }

        document.addEventListener("mousemove", onDragMove);
        document.addEventListener("touchmove", onDragMove, { passive: false });
        document.addEventListener("mouseup", onDragEnd);
        document.addEventListener("touchend", onDragEnd);
      }

      photo.addEventListener("mousedown", handleDragStart);
      photo.addEventListener("touchstart", handleDragStart);
    });

    noBtn.addEventListener("click", () => {
      if (noClicks >= 4) {
        pleaText.textContent = "Pleeeseeee click Yes.";
        return;
      }
      noClicks++;
      const scale = 1 + noClicks * 0.08;
      yesBtn.style.transform = `scale(${scale})`;
      const maxX = 180;
      const maxY = 120;
      const randomX = (Math.random() - 0.5) * maxX;
      const randomY = (Math.random() - 0.5) * maxY;
      noBtn.style.transform = `translate(${randomX}px, ${randomY}px)`;
      if (noClicks >= 4) {
        pleaText.textContent = "Pleeeseeee click Yes.";
        noBtn.disabled = true;
        noBtn.style.cursor = "not-allowed";
        noBtn.style.opacity = "0.6";
      }
    });

    yesBtn.addEventListener("click", () => {
      finalLine.classList.add("show");
      setTimeout(() => {
        const message = "Proposal accepted";
        const whatsappURL = `https://api.whatsapp.com/send?phone=916352335304&text=${encodeURIComponent(message)}`;
        window.open(whatsappURL, "_blank");
      }, 1500);
    });

    window.addEventListener("load", () => {
      typeStory();
      bgMusic.volume = 0.2;
      const playPromise = bgMusic.play();
      if (playPromise !== undefined) {
        playPromise.catch(() => {
          document.body.addEventListener("click", () => {
            bgMusic.play();
          }, { once: true });
        });
      }
    });

    passwordContinue.addEventListener("click", () => {
      showPage(pagePassword, pageProposal);
    });
  </script>
</body>
</html>
